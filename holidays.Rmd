---
title: "Holidays"
output: 
  html_document:
    code_folding: "hide"
    toc: true
    toc_float: true
    theme: cosmo
---

```{r setup, include = FALSE}
library(tidyverse)
library(patchwork)
library(plotly)
library(leaflet)
library(lubridate)

knitr::opts_chunk$set(
echo = TRUE,
warning = FALSE,
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%")

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis")

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

```{r basic data framing and tidying, include = TRUE, message = FALSE, warning = FALSE, echo = FALSE}
nypd_shooting_df = 
  read_csv("data/nypd_shooting_data.csv") %>%
  janitor::clean_names() %>%
  separate(col = occur_date, into = c("month", "day", "year"), sep = "/") %>% 
  separate(col = occur_time, into = c("hour", "minute", "second"), sep = ":") %>%
  mutate(across(where(is.character), tolower),
         month = as.numeric(month),
         month_name = recode(month, "1" = "january", "2" = "february", "3" = "march", "4" = "april", "5" = "may", "6" = "june", "7" = "july", "8" = "august", "9" = "september", "10" = "october", "11" = "november", "12" = "december"),
         day = as.numeric(day),
         year = as.numeric(year), 
         hour = as.numeric(hour),
         minute = as.numeric(minute), 
         second = as.numeric(second),
         minute_calc = hour * 60 + minute,
         boro = as.factor(boro), 
         boro = fct_relevel(boro, "manhattan", "brooklyn", "bronx", "queens", "staten island"),
         date = make_date(year = year, month = month, day = day)) %>% 
  relocate(incident_key, date)
```

**Background:**
We were interested to see if shooting incidents occurred in different frequency on New York City holidays compared to other days of the year. We hypothesized that both shooting victims and perpetrators would be more likely to be juveniles on holidays, as these days would represent periods in which school was not in session and therefore potential opportunities for social disruption.

**Methods:**
We defined holidays as specific calendar days designed as state holidays in New York State. On some instances a designated holiday was assigned as that which the holiday was _observed_ rather than on the typical/historic day of observation. For example, New Year's Day is a state-observed holiday in New York State. January 1, 2012 occurred on Sunday. However, Monday, January 2, 2012 was designed as New Year's Day in accordance with state observation. Additionally, Lincoln's Birthday and Washington's Birthday are designated as individual holidays in New York State. These typically occur on February 12th and 15th, respectively. In other states, these days are observed in combination on the third Monday in February. In some analyses, we combined Lincon's and Washington's Birthdays as one holiday, to allow for equitable comparison of shooting incidence and demographics to other holidays.

We included the the following New York State-recognized holidays: New Year's Day, Martin Luther King Jr. Day, Lincoln's Birthday, Washington's Birthday, Memorial Day, Juneteenth, Independence Day, Labor Day, Columbus Day, Veteran's Day, Thanksgiving, and Christmas.
